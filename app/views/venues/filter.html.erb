<p id="notice"><%= notice %></p>

<h1>Venues near you</h1>
<div style='width: 800px;'>
<div id="multi_markers" style='width: 400px; height: 400px;'></div>
</div>
<script>
handler = Gmaps.build('Google');
handler.buildMap({ provider: {
zoom: 4
// center: new google.maps.location(<%= @location.to_json %>)
},
internal: {id: 'multi_markers'}}, function(){
markers = handler.addMarkers(<%=raw @hashes.to_json %>);
handler.bounds.extendWith(markers);
handler.fitMapToBounds();
// });
//     var infowindow = new google.maps.InfoWindow();
//
//       var marker, i;
//
//       for (i = 0; i < locations.length; i++) {
//         marker = new google.maps.Marker({
//           position: new google.maps.LatLng(location[i][1], location[i][2]),
//           map: map
//         });
//
//         google.maps.event.addListener(marker, 'click', (function(marker, i) {
//           return function() {
//             infowindow.setContent(location[i][0]);
//             infowindow.open(map, marker);
//           }
//         })(marker, i));
});
</script>


<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Content</th>
      <th>Image</th>
      <th>Location</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @venues.each do |venue| %>
      <tr>
        <td><%= venue.name %></td>
        <td><%= venue.content %></td>
        <td><%= image_tag(venue.image, height: '200', width: '200') %></td>
        <td><%= venue.location %>
        <td><%= link_to 'Show', venue %></td>
        <td><%= link_to 'Edit', edit_venue_path(venue) %></td>
        <td><%= link_to 'Destroy', venue, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Venue', new_venue_path %>
